# Changelog

Все значимые изменения в проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased]

### Added
- **Оценка силы покерных комбинаций** - функция `evaluateHand()` для определения силы руки по правилам Техасского Холдема
  - Поддержка всех 10 типов комбинаций (Royal Flush, Straight Flush, Four of a Kind и т.д.)
  - Автоматический выбор лучшей комбинации из 7 карт
  - Сравнение рук с учётом кикеров
  - Вспомогательные функции: `compareHands()`, `findBestHand()`
  - Полная документация с примерами, тестами и визуализацией
- **Фильтрация диапазонов оппонента** - функция `filterOpponentRange()` для удаления блокеров
  - Учитывает карты Hero и борда (флоп, тёрн, ривер)
  - Возвращает детальную статистику (количество комбинаций, процент)
  - Вспомогательные функции: `getCombinationsPerHand()`, `hasAnyCombinations()`
  - Полная документация с примерами и тестами
- Hero диапазоны - отдельные JSON файлы для Hero без уровня strength
- Автоматическая инициализация блайндов для SB (0.5 BB) и BB (1 BB)
- Модульная архитектура Redux - разделение на types, utils и slices
- Тип `RangeSetData` для пользовательских диапазонов из БД
- Поддержка двойного приведения типов для несовместимых JSON структур
- Полная API документация с примерами использования
- OAuth 2.0 авторизация через Google и Yandex

### Changed
- Рефакторинг `tableSlice.ts` - уменьшен с 1809 до 1483 строк (~18% оптимизация)
- Все типы Redux перенесены в `lib/redux/types/tableTypes.ts`
- Все утилиты Redux перенесены в `lib/redux/utils/tableUtils.ts`
- Функция `generateUsers()` теперь создаёт игроков с дефолтными параметрами (amateur, balanced, medium)
- Улучшена структура диапазонов - поддержка stages (early, middle, pre-bubble, late, pre-final, final)
- Обновлена документация с детальным описанием Hero диапазонов

### Fixed
- Исправлена проблема с отсутствием карт у Hero при генерации игроков
- Исправлена проблема с отсутствием начальных блайндов у SB и BB
- Устранены все использования `any` в коде (заменены на типизированные интерфейсы)
- Исправлена загрузка пользовательских диапазонов из БД
- Исправлена проверка доступности диапазонов в TournamentSettings

### Removed
- Удалены устаревшие файлы (`lib/constants/defaultRanges.ts`, `lib/types/actions.ts`)

---

## [1.0.0] - 2025-11-28

### Added
- Базовая структура приложения на Next.js 16 + React 19
- Redux Toolkit для state management
- PostgreSQL база данных с поддержкой пользователей и диапазонов
- JWT аутентификация
- Поддержка 6-Max, 8-Max турниров и Cash игр
- Визуальный редактор диапазонов (матрица 13x13)
- Конструктор пользовательских диапазонов
- Система турнирных настроек (стадии, категории, bounty)
- Глобальная настройка Auto All-In
- Карточный селектор для Hero и борда
- Расчет эквити рук
- API endpoints для управления пользовательскими диапазонами

### Security
- Хэширование паролей с bcrypt
- JWT токены со сроком действия 7 дней
- Защита API endpoints через middleware

---

## Типы изменений

- `Added` - новые функции
- `Changed` - изменения в существующем функционале
- `Deprecated` - функции, которые скоро будут удалены
- `Removed` - удалённые функции
- `Fixed` - исправления багов
- `Security` - исправления уязвимостей
